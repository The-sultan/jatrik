<?xml version="1.0" encoding="UTF-8"?>
<div xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/default.xhtml">


	<h:form id="formMrkt" rendered="#{!marketPlaceController.error}">
	<p:growl id="growl" showDetail="true" sticky="false" life="3000" /> 
	<div class="formMrkt">
		<div id="marketplaceVentas"  align="center"
			style="width: 65%; float: left;">
			<h1 style="color: white;">Venta de jugadores</h1>
			<div id="jugadoresVender">
				<ui:repeat var="jugador"
					value="#{marketPlaceController.jugadoresNoEnVenta}">
					<div id="jug" class="titular titularHover" style="width: 8%">
						<p:panel id="rpnl"
							style="background-color: rgba(255, 255, 255,0); border-color:rgba(0,0,0,0);background-image:none;">
							<ui:insert name="jugador">
								<ui:include src="/tarjeta.xhtml">
									<ui:param name="id" value="#{jugador.id}" />
									<ui:param name="nombre" value="#{jugador.nombre}" />
									<ui:param name="puesto"
										value="#{jugador.puesto.subSequence(0,3)}" />
									<ui:param name="valoracion" value="50" />
									<ui:param name="ataque"
										value="#{jugador.habilidades.get(0).valor}" />
									<ui:param name="defensa"
										value="#{jugador.habilidades.get(1).valor}" />
									<ui:param name="velocidad"
										value="#{jugador.habilidades.get(2).valor}" />
									<ui:param name="tecnica"
										value="#{jugador.habilidades.get(3).valor}" />
									<ui:param name="porteria"
										value="#{jugadorhabilidades.get(4).valor}" />
								</ui:include>
							</ui:insert>
						</p:panel>
					</div>
					<p:draggable for="rpnl" revert="true" />
				</ui:repeat>

			</div>

		</div>
		<div
			style="width: 30%; height: 450px; float: right;">


			<div id="jug" class="titular jugadorVenta"
				style="width: 7%; margin-left: 30%; margin-top: 30%;">
				<p:panel id="rpnlVent"
					style="background-color: rgba(255, 255, 255,0);border-color:rgba(0,0,0,0);background-image:none;">
					<ui:insert name="jugador">
						<ui:include src="/tarjeta.xhtml">
							<ui:param name="id"
								value="#{marketPlaceController.jugadorSeleccionadoVenta.id}" />
							<ui:param name="nombre"
								value="#{marketPlaceController.jugadorSeleccionadoVenta.nombre}" />
							<ui:param name="puesto"
								value="#{marketPlaceController.jugadorSeleccionadoVenta.puesto.subSequence(0,3)}" />
							<ui:param name="valoracion" value="50" />
							<ui:param name="ataque"
								value="#{marketPlaceController.jugadorSeleccionadoVenta.habilidades.get(0).valor}" />
							<ui:param name="defensa"
								value="#{marketPlaceController.jugadorSeleccionadoVenta.habilidades.get(1).valor}" />
							<ui:param name="velocidad"
								value="#{marketPlaceController.jugadorSeleccionadoVenta.habilidades.get(2).valor}" />
							<ui:param name="tecnica"
								value="#{marketPlaceController.jugadorSeleccionadoVenta.habilidades.get(3).valor}" />
							<ui:param name="porteria"
								value="#{marketPlaceController.jugadorSeleccionadoVenta.habilidades.get(4).valor}" />
						</ui:include>
					</ui:insert>

				</p:panel>
				<div style="width: 550%; text-align: center;">
					<p:inputText style="text-align: center; " value="#{marketPlaceController.valorVenta}"></p:inputText>
					<p:commandButton value="Vender"  actionListener="#{marketPlaceController.venderJugador}"
						icon="ui-icon-star" update="formMrkt">
						<f:param name="productId" value="10" />
					</p:commandButton>
				</div>
			</div>


		</div>


		<div id="marketplaceCompras" class="formMrktplace" align="center"
			style="width: 65%; float: left;">
			<h1 style="color: white;">Compra de jugadores</h1>
			<div id="jugadoresComprar">
				<ui:repeat var="jugador"
					value="#{marketPlaceController.jugadoresEnVenta}">
					<div id="jug" class="titular titularHover" style="width: 8%">
						<p:panel id="rpnlComp"
							style="background-color: rgba(255, 255, 255,0); border-color:rgba(0,0,0,0);background-image:none;">
							<ui:insert name="jugador">
								<ui:include src="/tarjeta.xhtml">
									<ui:param name="id" value="#{jugador.id}" />
									<ui:param name="nombre" value="#{jugador.nombre}" />
									<ui:param name="puesto"
										value="#{jugador.puesto.subSequence(0,3)}" />
									<ui:param name="valoracion" value="50" />
									<ui:param name="ataque"
										value="#{jugador.habilidades.get(0).valor}" />
									<ui:param name="defensa"
										value="#{jugador.habilidades.get(1).valor}" />
									<ui:param name="velocidad"
										value="#{jugador.habilidades.get(2).valor}" />
									<ui:param name="tecnica"
										value="#{jugador.habilidades.get(3).valor}" />
									<ui:param name="porteria"
										value="#{jugadorhabilidades.get(4).valor}" />
								</ui:include>
							</ui:insert>
						</p:panel>
					</div>
					<p:draggable for="rpnlComp" revert="true" />
				</ui:repeat>

			</div>

		</div>
		<div
			style=" width: 30%; height: 500px; float: right;">


			<h:panelGroup layout="block" id="jug" class="titular jugadorVenta" 
				style="width: 7%; margin-left: 30%;margin-top: 10%;" rendered="#{not empty marketPlaceController.transferenciaSeleccionadaCompra}">
				<p:panel id="rpnlCompJug"
					style="background-color: rgba(255, 255, 255,0);border-color:rgba(0,0,0,0);background-image:none;">
					<ui:insert name="jugador">
						<ui:include src="/tarjeta.xhtml">
							<ui:param name="id"
								value="#{marketPlaceController.transferenciaSeleccionadaCompra.jugador.id}" />
							<ui:param name="nombre"
								value="#{marketPlaceController.transferenciaSeleccionadaCompra.jugador.nombre}" />
							<ui:param name="puesto"
								value="#{marketPlaceController.transferenciaSeleccionadaCompra.jugador.puesto.subSequence(0,3)}" />
							<ui:param name="valoracion" value="50" />
							<ui:param name="ataque"
								value="#{marketPlaceController.transferenciaSeleccionadaCompra.jugador.habilidades.get(0).valor}" />
							<ui:param name="defensa"
								value="#{marketPlaceController.transferenciaSeleccionadaCompra.jugador.habilidades.get(1).valor}" />
							<ui:param name="velocidad"
								value="#{marketPlaceController.transferenciaSeleccionadaCompra.jugador.habilidades.get(2).valor}" />
							<ui:param name="tecnica"
								value="#{marketPlaceController.transferenciaSeleccionadaCompra.jugador.habilidades.get(3).valor}" />
							<ui:param name="porteria"
								value="#{marketPlaceController.transferenciaSeleccionadaCompra.jugador.habilidades.get(4).valor}" />
						</ui:include>
					</ui:insert>

				</p:panel>
				<div style="width: 550%; text-align: center;">
					<p:inputText style="text-align: center; " value="#{marketPlaceController.transferenciaSeleccionadaCompra.precio}"></p:inputText>
					<p:commandButton value="Comprar"  actionListener="#{marketPlaceController.compraDeJugador}"
						icon="ui-icon-star" update="formMrkt">
						<f:param name="productId" value="10" />
					</p:commandButton>
				


				</div>

			</h:panelGroup>




		</div>
</div>

		<p:remoteCommand name="seleccionarJugadorVentaRemote"
			action="#{marketPlaceController.seleccionarJugadorVenta}"
			update="formMrkt" ajax="false" />

		<script>
			function handleDblClick() {
				this.style.cursor = "wait";
				seleccionarJugadorVentaRemote([ {
					name : 'id',
					value : this.id
				} ]);
			}

			function setHandlers() {
				var cols = document.querySelectorAll('.cardcontainer');
				[].forEach.call(cols, function(col) {

					col.removeEventListener('dblclick', handleDblClick, false);
					col.addEventListener('dblclick', handleDblClick, false);
				});
			}

			setHandlers();
		</script>

	</h:form>





</div>
