<?xml version="1.0" encoding="UTF-8"?>

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/default.xhtml">
	<ui:define name="content">
		<h1>Bienvenido a Jatrik!</h1>

		<div>
			<p>El simulador de futbol de nivel mundial</p>
			<h3>Registrate y conviertete en manager</h3>

		</div>

		<div>

			<h3>Ya estas registrado?</h3>

			<h:form id="reg">
				<h:panelGrid columns="3" columnClasses="titleCell">
					<h:outputLabel for="nick" value="Nick:" />
					<p:inputText id="nick" value="#{datos.nick}" />
					<h:message for="nick" errorClass="invalid" />

					<h:outputLabel for="pwd1" value="Password:" />
					<p:password id="pwd1" value="#{datos.password}" label="Password"
						required="true" />
					<h:message for="pwd1" errorClass="invalid" />


				</h:panelGrid>


				<p>
					<h:panelGrid columns="2">
						<p:commandButton id="login"
							actionListener="#{loginController.loginDelay}" value="Login"
							styleClass="register"  oncomplete="manejarLogin(xhr, status, args)" />
						<h:messages styleClass="messages" errorClass="invalid"
							infoClass="valid" warnClass="warning" globalOnly="true" />
					</h:panelGrid>
				</p>
			</h:form>
		</div>

		<script type="text/javascript">
		  //<![CDATA[
		  function manejarLogin(xhr, status, args) {
		    if (!args.validationFailed && args.estaLogeado) {
		      setTimeout(function() {
		        window.location = args.view;
		      }, 500);
		    }
		  }
		//]]>
		</script>


	</ui:define>
	
</ui:composition>
